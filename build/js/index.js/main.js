(()=>{"use strict";{let e=document.createElement("style");e.setAttribute("name","pulsor.until"),e.innerHTML="\n    [\\-until] {\n      display: none;\n      opacity: 0;\n      pointer-events: none;\n      z-index: -1;\n      visibility: hidden;\n    }",document.head.appendChild(e)}class e{static callback=null;static isCalling=!1;static refreshCalls=new Set;static autoRefresh=!1;static proxySymbol=Symbol("isProxy");static recorderValue=null;static getProxyHandler(t={},r="data"){return{get:(n,l,s)=>{if("symbol"!=typeof l&&e.callback){let n=`${r}.${l}`;t[n]||(t[n]=new Set),t[n].add(e.callback)}e.recorderValue||(e.recorderValue={set(i){Reflect.set(n,l,i,s),e.handCalls(t,`${r}.${l}`)}});let i=Reflect.get(n,l,s);return"symbol"!=typeof l&&null!==i&&"object"==typeof i&&Object.hasOwn(n,l)&&!Object.hasOwn(i,e.proxySymbol)&&(i=new Proxy(i,e.getProxyHandler(t,`${r}.${l}`)),Reflect.set(n,l,i,s),i[e.proxySymbol]=!0),i},set:(n,l,s,i)=>{if(Reflect.get(n,l,i)===s&&"length"!==l)return!0;let a=Reflect.set(n,l,s,i);return"symbol"!=typeof l&&e.handCalls(t,`${r}.${l}`),a},deleteProperty(n,l,s){let i=Reflect.deleteProperty(n,l,s);return"symbol"!=typeof l&&Reflect.has(n,l,s)&&e.handCalls(t,`${r}.${l}`),i}}}static handCalls(t,r){if(!e.isCalling){if(e.isCalling=!0,e.autoRefresh)for(const n in t)Object.hasOwnProperty.call(t,n)&&0==n.indexOf(r)&&t[n].forEach((t=>{e.callback=t,t(),e.callback=null}));else for(const n in t)Object.hasOwnProperty.call(t,n)&&0==n.indexOf(r)&&t[n].forEach((t=>e.refreshCalls.add(t)));e.isCalling=!1}}static getProxyData(t){return"object"==typeof t&&null!==t?new Proxy(t,e.getProxyHandler()):"function"==typeof t?t:new Proxy({v:t},e.getProxyHandler())}static clearRefresh(){e.refreshCalls.clear()}static refresh(){e.autoRefresh||(e.isCalling=!0,e.refreshCalls.forEach((t=>{e.callback=t,t()})),e.clearRefresh(),e.isCalling=!1)}}class t{root=null;dataKeys=[];dataValues=[];isRendered=!1;rendered=[];forKeys=[];forValues=[];ifConditions=[];lastIfElement=null;putNodes={};event=null;events={};static supportTouch="ontouchstart"in document;static definedSpecials={};constructor(e,t){this.root=e,this.dataKeys=Object.keys(t),this.dataValues=Object.values(t),"loading"===window.document.readyState?document.addEventListener("DOMContentLoaded",(()=>{this.renderRoot()})):this.renderRoot()}renderRoot(){this.renderNode(this.root),this.isRendered=!0,this.rendered.forEach((e=>e()))}renderNode(e){if("#text"===e.nodeName)this.renderText(e);else{if(e.attributes&&this.renderAttr(e))return;if(e.childNodes)for(const t of Array.from(e.childNodes))this.renderNode(t)}}renderText(e){let t;for(;null!==(t=e.data.match(/\{\{.*?\}\}/));){0!==t.index&&(e=e.splitText(t.index));let r=e.splitText(t[0].length);this.renderTextCotnt(e,e.data.slice(2,-2)),e=r}}renderTextCotnt(e,t){let r=this.getValueFun(t);this.setLsnrctlCallback((()=>{let t=r();e.data=void 0===t?"":"object"==typeof t?JSON.stringify(t):t}),e)}renderAttr(e){let t={},r={},n={},l={};for(const s of e.attributes){let[e,...i]=s.name.split(".");e.length<=1||(":"===e[0]?t[s.name]=[e.slice(1),i,s.value]:"@"===e[0]?r[s.name]=[e.slice(1),i,s.value]:"-"===e[0]?n[s.name]=[e.slice(1),i,s.value]:"+"===e[0]&&(l[s.name]=[e.slice(1),i,s.value]))}if(this.renderSpecials(e,n))return!0;this.renderBinds(e,t),this.renderEvents(e,r),this.renderRetains(e,l)}renderBinds(e,t){for(const r in t)if(Object.hasOwnProperty.call(t,r)){const[n,l,s]=t[r];e.removeAttribute(r),["INPUT","SELECT"].includes(e.tagName.toUpperCase())&&":"===n[0]?this.renderBind_mutual(e,n.slice(1),s,l):"class"===n?this.renderBind_class(e,s,l):"style"===n?this.renderBind_style(e,s,l):this.renderBind_normal(e,n,s,l)}}renderBind_normal(e,t,r,n){let l=this.getValueFun(r);this.setLsnrctlCallback((()=>{let r=l();"[object String]"===Object.prototype.toString.call(r)||0===t.indexOf("data-")?e.setAttribute(t,r):e[t]=r}),e)}renderBind_class(e,t,r){let n=e.className,l=this.getValueFun(t);this.setLsnrctlCallback((()=>{let t=n,r=l();if(null!==r&&"object"==typeof r)for(const e in r)Object.hasOwnProperty.call(r,e)&&r[e]&&(t+=" "+e);else t+=" "+r;e.className=t}),e)}renderBind_style(e,t,r){let n=e.getAttribute("style")||"",l=this.getValueFun(t);this.setLsnrctlCallback((()=>{let t=n,r=l();if(null!==r&&"object"==typeof r){for(const e in r)if(Object.hasOwnProperty.call(r,e)){let n=r[e];if("transform"===e&&"[object Object]"===Object.prototype.toString.call(n)){let e="";for(const t in n)Object.hasOwnProperty.call(n,t)&&(e+=`${t}(${n[t]})`);n=e}t+=e+":"+n+";"}}else t+=r;e.setAttribute("style",t)}),e)}renderBind_mutual(e,t,r,n){let l=e.tagName.toUpperCase();"INPUT"===l?this.renderBind_mutual_input(e,t,r,n):"SELECT"===l&&this.renderBind_mutual_select(e,t,r,n)}renderBind_mutual_input(t,r,n,l){let s=this.getValueFun(n),i=null,a="";if("checkbox"===t.type){a="change";let r=s(),n=t.getAttribute("value")||t.value;"[object Array]"===Object.prototype.toString.call(r)?(this.setLsnrctlCallback((()=>{t.checked=r.includes(n)}),t),i=()=>{if(t.checked&&!r.includes(n))r.push(n);else if(!t.checked&&r.includes(n)){let e=r.indexOf(n);r.splice(e,1)}}):"[object Object]"===Object.prototype.toString.call(r)?(this.setLsnrctlCallback((()=>{t.checked=r[n]}),t),i=()=>{r[n]=t.checked}):(e.recorderValue=null,this.setLsnrctlCallback((()=>{t.checked=s()}),t),e.recorderValue&&(i=e.recorderValue.set))}else"radio"===t.type?(a="change",e.recorderValue=null,this.setLsnrctlCallback((()=>{t.checked=s()===t.value}),t),e.recorderValue&&(i=e.recorderValue.set)):(a="input",e.recorderValue=null,this.setLsnrctlCallback((()=>{t.value=s()}),t),e.recorderValue&&(i=e.recorderValue.set));t.addEventListener(r||a,(()=>{i&&i(t.value),e.autoRefresh||e.refresh()}))}renderBind_mutual_select(t,r,n,l){let s,i=this.getValueFun(n);e.recorderValue=null,this.setLsnrctlCallback((()=>{t.value=i()}),t),e.recorderValue&&(s=e.recorderValue.set),t.addEventListener(r||"change",(()=>{s&&s(t.value),e.autoRefresh||e.refresh()}))}renderEvents(e,t){for(const r in t)if(Object.hasOwnProperty.call(t,r)){const[n,l,s]=t[r];e.removeAttribute(r),"down"===n?this.renderEvent_down(e,s,l):"up"===n?this.renderEvent_up(e,s,l):"clk"===n?this.renderEvent_clk(e,s,l):"dbclk"===n?this.renderEvent_dbclk(e,s,l):"move"===n?this.renderEvent_move(e,s,l):this.renderEvent_normal(e,n,s,l)}}renderEvent_down(e,r,n){this.getValueFun(r),t.supportTouch?this.renderEvent_normal(e,"touchstart",r,n):this.renderEvent_normal(e,"mousedown",r,n)}renderEvent_up(e,r,n){t.supportTouch?this.renderEvent_normal(e,"touchend",r,n):this.renderEvent_normal(e,"mouseup",r,n)}renderEvent_clk(e,r,n){if(t.supportTouch){let t=this.getValueFun(r),l=!0,s=0;this.renderEvent_normal(e,"touchstart",(e=>{l=!1,s=Date.now()}),n),this.renderEvent_normal(e,"touchmove",(e=>{l=!0})),this.renderEvent_normal(e,"touchend",(e=>{Date.now()-s<=150&&!l&&t()}),n)}else this.renderEvent_normal(e,"click",r,n)}renderEvent_dbclk(e,r,n){if(t.supportTouch){let t=this.getValueFun(r),l=0,s=0;this.renderEvent_normal(e,"touchstart",(e=>(e.preventDefault(),e.returnValue=!1,l++,1===l&&(s=setTimeout((()=>{l=0}),500)),!1)),n),this.renderEvent_normal(e,"touchend",(e=>(e.preventDefault(),e.returnValue=!1,l++,1===l?l=0:4===l&&(clearTimeout(s),l=0,t(e)),!1)),n)}else this.renderEvent_normal(e,"dbclick",r,n)}renderEvent_move(e,r,n){if(t.supportTouch){let t=this.getValueFun(r),l=0,s=0;this.renderEvent_normal(e,"touchstart",(e=>(e.preventDefault(),e.returnValue=!1,l++,1===l&&(s=setTimeout((()=>{l=0}),500)),!1)),n),this.renderEvent_normal(e,"touchend",(e=>(e.preventDefault(),e.returnValue=!1,l++,1===l?l=0:4===l&&(clearTimeout(s),l=0,t(e)),!1)),n)}else this.renderEvent_normal(e,"dbclick",r,n)}renderEvent_normal(r,n,l,s){let i="function"==typeof l?l:this.getValueFun(l);if(!this.events[n]){let l=new Map;this.events[n]=l,this.root.addEventListener(n,(n=>{n=n||window.event,l.forEach(((r,l)=>{l.contains(n.target)&&r.forEach((r=>{t.event=n,r(),e.autoRefresh||e.refresh()}))})),s.includes("once")&&l.get(r).delete(i)}),{passive:!1,cancelable:!1})}this.events[n].has(r)||this.events[n].set(r,new Set),this.events[n].get(r).add(i)}renderSpecials(e,r){for(let n in r)if(Object.hasOwnProperty.call(r,n)){const[l,s,i]=r[n];"until"===l||e.removeAttribute(n);let a=!1;if("for"===l?a=this.renderSpecial_for(e,i,s):"if"===l?a=this.renderSpecial_if(e,i,s):"elif"===l?a=this.renderSpecial_elif(e,i,s):"else"===l?a=this.renderSpecial_else(e,s):"until"===l?a=this.renderSpecial_until(e,s):"show"===l?a=this.renderSpecial_show(e,i,s):"rise"===l?a=this.renderSpecial_rise(e,i,s):"put"===l&&(a=this.renderSpecial_put(e,i,s)),t.definedSpecials[l]&&(a=t.definedSpecials[l](e,i,s,this.getValueFun(i),this.setLsnrctlCallback)),a)return!0}}renderSpecial_for(t,r,n){let[l,s]=r.split(" in "),[i,a]=l.split(","),o=document.createComment("render.for");t.parentNode.insertBefore(o,t),t.parentNode.removeChild(t);let c,d=this.getValueFun(s),u=[];return this.setLsnrctlCallback((()=>{c=d();let r="number"==typeof c,n=r?c:c.length;if(e.callback=null,n>u.length)for(let e=u.length;e<n;e++){this.forKeys.push(i),r?this.forValues.push((()=>e)):"object"==typeof c[e]?this.forValues.push((()=>c[e])):this.forValues.push((()=>({get v(){return c[e]},set v(t){c[e]=t}}))),a&&(this.forKeys.push(a),this.forValues.push((()=>e)));let n=t.cloneNode(!0);u.push(n),o.parentNode.insertBefore(n,o),this.renderNode(n),this.forKeys.pop(),this.forValues.pop(),a&&(this.forKeys.pop(),this.forValues.pop())}else if(n<u.length){for(let e=n;e<u.length;e++)u[e].parentNode.removeChild(u[e]);u.length=n}}),t),!0}renderSpecial_if(e,t,r){let n=document.createComment("if");e.parentNode.insertBefore(n,e);let l=this.getValueFun(t);this.ifConditions=[l],this.lastIfElement=e,this.setLsnrctlCallback((()=>{l()?n.parentNode.insertBefore(e,n):n.parentNode.removeChild(e)}),e)}renderSpecial_elif(e,t,r){if(0===this.ifConditions.length)return;let n=e.previousElementSibling;if(!n||n!==this.lastIfElement)return;let l=document.createComment("elif");e.parentNode.insertBefore(l,e);let s=this.getValueFun(t),i=[...this.ifConditions];this.ifConditions.push(s),this.lastIfElement=e,this.setLsnrctlCallback((()=>{for(const t of i)if(t())return void l.parentNode.removeChild(e);l.parentNode.insertBefore(e,l)}),e)}renderSpecial_else(e,t){if(0===this.ifConditions.length)return;let r=e.previousElementSibling;if(!r||r!==this.lastIfElement)return;let n=document.createComment("elif");e.parentNode.insertBefore(n,e);let l=[...this.ifConditions];this.ifConditions=[],this.lastIfElement=null,this.setLsnrctlCallback((()=>{for(const t of l)if(t())return void n.parentNode.removeChild(e);n.parentNode.insertBefore(e,n)}),e)}renderSpecial_until(e,t){this.rendered.push((()=>{e.removeAttribute("-until")}))}renderSpecial_show(e,t,r){let n=this.getValueFun(t),l=e.style.display,s={display:e=>e?l:"none"};if(r.includes("opacity")){let t=e.style.opacity,r=e.style.pointerEvents;s={opacity:e=>e?t:0,pointerEvents:e=>e?r:"none"}}this.setLsnrctlCallback((()=>{let t=n();for(const r in s)Object.hasOwnProperty.call(s,r)&&(e.style[r]=s[r](t))}),e)}renderSpecial_rise(e,t,r){let n=this.renderSpecial_rise_adorns(e,r),l=this.getValueFun(t);this.setLsnrctlCallback((()=>{l()?e.animate(n,{duration:this.isRendered?500:0,fill:"both"}):e.animate(n,{duration:this.isRendered?500:0,fill:"both",direction:"reverse"})}),e)}renderSpecial_rise_adorns(e,t){let r=getComputedStyle(e),n={offset:[0,1],visibility:["hidden","visible"]};t.includes("opacity")&&(n.opacity=[0,parseFloat(r.opacity)]);let l,s,i=r.transform;"none"===i?(i="matrix(1,0,0,1,0,0)",l=[[1,0,0],[0,1,0],[0,0,1]]):(s=i.indexOf("3d")>=0,l=i.slice(s?9:7,-1).split(",").map((e=>+e)));let a=[[1,0,0],[0,1,0],[0,0,1]];t.includes("left")?a[0][2]=-20:t.includes("right")&&(a[0][2]=20),t.includes("bottom")?a[1][2]=20:t.includes("top")&&(a[1][2]=-20);let o=[[1,0,0],[0,1,0],[0,0,1]];t.includes("scale")?(o[0][0]=1e-4,o[1][1]=1e-4):t.includes("scaleX")?o[0][0]=1e-4:t.includes("scaleY")&&(o[1][1]=1e-4);let c=[[1,0,0],[0,1,0],[0,0,1]];t.includes("rotate")&&(c[0][0]=c[1][1]=Math.cos(Math.PI),c[0][1]=-Math.sin(Math.PI),c[1][0]=Math.sin(Math.PI));let d=[a,o,c].reduce(((e,t)=>{let r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let l=0;l<3;l++)for(let s=0;s<3;s++)r[n][l]+=e[n][s]*t[s][l];return r}),l),u="matrix("+d[0][0]+","+d[1][0]+","+d[0][1]+","+d[1][1]+","+d[0][2]+","+d[1][2]+")";return n.transform=[u,i],n}renderSpecial_put(e,t,r){let n=document.createComment("put");if(e.parentNode.insertBefore(n,e),r.includes("id"))e.parentNode.removeChild(e),this.putNodes[t]=n;else{let r=this.getValueFun(t);this.setLsnrctlCallback((()=>{let t,l=r();if("object"==typeof l){for(const e in l)if(Object.hasOwnProperty.call(l,e)&&l[e]){t=e;break}}else t=l;t="#"===t?n:this.putNodes[l],t&&t!==e.nextSibling&&t.parentNode.insertBefore(e,t)}))}}renderRetains(e,t){e.retainAttrs||(e.retainAttrs={});for(let r in t)if(Object.hasOwnProperty.call(t,r)){const[n,l,s]=t[r];e.retainAttrs[n]=this.getValueFun(s)(),e.removeAttribute(r)}}setLsnrctlCallback(t){e.callback=t,e.callback(),e.callback=null}getValueFun(e){e=e.replaceAll("\n","\\n")||void 0;let t=this.dataKeys,r=this.dataValues,n=[...this.forKeys],l=[...this.forValues];return()=>{let s=[...t,...n],i=[...r,...l.map((e=>e()))];return new Function(...s,`return (${e})`)(...i)}}}class r{static get event(){return t.event}static set event(e){}static get autoRefresh(){return e.autoRefresh}static set autoRefresh(t){e.autoRefresh=!!t}static bind(t,r){return e.getProxyData(t,r)}static watch(t,r){e.callback=()=>{e.callback=null,r()},t(),e.callback=null}static render(e,r={}){let n=null;if(e instanceof Node?n=e:"string"==typeof e&&(n=document.querySelector(e)),!n)throw"Render.root not is a Node or NodeSelector!";if(null!==r&&r.constructor!==Object)throw"Render.Data not is a undefined or object!";n&&new t(n,r)}static refresh(){e.refresh()}static clearRefresh(){e.clearRefresh()}static defineSpecial(e,r){/^[a-z]+$/.test(e)&&console.error(`defineSpecialAttr.name "${e}" is not a valid attr name`),"function"==typeof r?t.definedSpecials[e]=r:console.error("defineSpecialAttr.renderFun not is a function")}static defineEvent(e,t){}}console.log(r),r.components({AppMenu:"src/components/AppMenu",AppAudios:"src/components/AppAudios",AppPackhtml:"src/components/AppPackHtml",AppBase64:"src/components/AppBase64"})})();